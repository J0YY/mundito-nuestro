"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[416],{7416:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var a=s(7437),n=s(2265),o=s(6777),r=s(8760),i=s(3631),l=s(359),c=s(7776),d=s(1291),h=s(2752),p=s(6792);let u=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=Math.PI/180*(90-e),n=Math.PI/180*(t+180);return new c.Vector3(-s*Math.sin(a)*Math.cos(n),s*Math.cos(a),s*Math.sin(a)*Math.sin(n))},m=(e,t)=>{let s=e.clone().lerp(t,.5).normalize().multiplyScalar(1.25);return new c.CatmullRomCurve3([e,s,t]).getPoints(48)},x=()=>{let e=(0,n.useMemo)(()=>{let e=[];return d.Z.forEach(t=>{let s=t.geometry;if(!s)return;let a=s=>{let a=s.map(e=>{let[t,s]=e;return u(s,t,1.005)});a.length>0&&a.push(a[0].clone()),e.push({id:"".concat(t.cca3,"-").concat(e.length),points:a})};"Polygon"===s.type?s.coordinates.forEach(e=>a(e)):"MultiPolygon"===s.type&&s.coordinates.forEach(e=>e.forEach(e=>a(e)))}),e},[]);return(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(r.x,{points:e.points,color:"#72d2a4",lineWidth:.8,transparent:!0,opacity:.6},e.id))})},g=()=>(0,a.jsxs)("mesh",{children:[(0,a.jsx)("sphereGeometry",{args:[1,128,128]}),(0,a.jsx)("meshStandardMaterial",{color:"#0b3a77",roughness:.8,metalness:.05})]}),f=()=>(0,a.jsxs)("mesh",{scale:1.03,children:[(0,a.jsx)("sphereGeometry",{args:[1,64,64]}),(0,a.jsx)("meshPhongMaterial",{color:"#5fd9ff",transparent:!0,opacity:.08,side:c.BackSide})]}),j=e=>{let{points:t,arcs:s,autoRotate:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("color",{attach:"background",args:["#050815"]}),(0,a.jsx)("ambientLight",{intensity:.7}),(0,a.jsx)("directionalLight",{position:[2,2,1],intensity:1.1}),(0,a.jsx)(g,{}),(0,a.jsx)(f,{}),(0,a.jsx)(x,{}),t.map(e=>(0,a.jsxs)("mesh",{position:e.position,scale:.018,children:[(0,a.jsx)("sphereGeometry",{args:[1,20,20]}),(0,a.jsx)("meshStandardMaterial",{color:e.color,emissive:e.color,emissiveIntensity:.8})]},e.id)),s.map(e=>(0,a.jsx)(r.x,{points:e.points,color:e.color,lineWidth:2,transparent:!0,opacity:.5},e.id)),(0,a.jsx)(i.t,{radius:50,depth:20,count:2e3,factor:4,saturation:0,fade:!0,speed:1}),(0,a.jsx)(l.z,{enableDamping:!0,dampingFactor:.05,autoRotate:n,autoRotateSpeed:.25})]})};function v(){let e=(0,h.q)(e=>e.getFilteredMemories()),[t,s]=(0,n.useState)(!0),{points:r,arcs:i}=(0,n.useMemo)(()=>{let t=e.map(e=>{var t;return{id:e.id,title:e.title,position:u(e.lat,e.lng,1.01),color:null!==(t=p.pG[e.category])&&void 0!==t?t:"#ffffff"}}),s=e.slice().sort((e,t)=>{var s,a;return new Date("".concat(e.date," ").concat(null!==(s=e.time)&&void 0!==s?s:"00:00:00")).getTime()-new Date("".concat(t.date," ").concat(null!==(a=t.time)&&void 0!==a?a:"00:00:00")).getTime()}),a=[];for(let e=0;e<s.length-1;e+=1){var n;let t=u(s[e].lat,s[e].lng),o=u(s[e+1].lat,s[e+1].lng);a.push({id:"".concat(s[e].id,"-").concat(s[e+1].id),color:null!==(n=p.pG[s[e+1].category])&&void 0!==n?n:"#ffffff",points:m(t,o)})}return{points:t,arcs:a}},[e]);return(0,a.jsxs)("div",{className:"relative h-[560px] lg:h-full rounded-[28px] overflow-hidden bg-gradient-to-br from-[#040612] via-[#0c1630] to-[#1b0f2f]",children:[(0,a.jsx)(o.Xz,{camera:{position:[0,0,2.8],fov:45},children:(0,a.jsx)(j,{points:r,arcs:i,autoRotate:t})}),(0,a.jsxs)("div",{className:"absolute top-4 left-4 glass-panel px-4 py-2 bg-white/10 border-white/20 rounded-2xl flex items-center gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.4em] text-white/70",children:"Globe"}),(0,a.jsxs)("p",{className:"text-sm text-white/90",children:["Memories plotted: ",r.length]})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,onChange:e=>s(e.target.checked)}),"Rotate"]})]})]})}}}]);